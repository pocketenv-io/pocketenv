amends "../../schema/lexicon.pkl"

lexicon = 1
id = "io.pocketenv.sandbox"
defs = new Mapping<String, Record> {
  ["main"] {
    type = "record"
    key = "tid"
    `record` {
      type = "object"
      required = List("name", "createdAt")
      properties {
        ["name"] = new StringType {
          type = "string"
          maxLength = 255
          description = "Name of the sandbox"
        }
        ["base"] = new Ref {
          type = "ref"
          ref = "com.atproto.repo.strongRef"
          description = "A strong reference to the base template for the sandbox environment."
        }
        ["provider"] = new StringType {
          type = "string"
          maxLength = 50
          description = "The provider of the sandbox, e.g. 'daytona', 'vercel', 'cloudflare', etc."
        }
        ["description"] = new StringType {
          type = "string"
          maxLength = 3000
          maxGraphemes = 300
        }
        ["website"] = new StringType {
          type = "string"
          format = "uri"
          description = "Any URI related to the sandbox"
        }
        ["logo"] = new StringType {
          type = "string"
          format = "uri"
          description = "URI to an image logo for the sandbox"
        }
        ["topics"] = new Array {
          type = "array"
          items = new StringType {
            type = "string"
            minLength = 1
            maxLength = 50
          }
          maxLength = 50
        }
        ["repo"] = new StringType {
          type = "string"
          description =
            "A git repository URL to clone into the sandbox, e.g. a GitHub/Tangled repo."
          format = "uri"
        }
        ["readme"] = new StringType {
          type = "string"
          description = "A URI to a README for the sandbox."
          format = "uri"
        }
        ["vcpus"] = new IntegerType {
          type = "integer"
          description = "Number of virtual CPUs allocated to the sandbox"
        }
        ["memory"] = new IntegerType {
          type = "integer"
          description = "Amount of memory in GB allocated to the sandbox"
        }
        ["disk"] = new IntegerType {
          type = "integer"
          description = "Amount of disk space in GB allocated to the sandbox"
        }
        ["createdAt"] = new StringType {
          type = "string"
          format = "datetime"
        }
      }
    }
  }
}
